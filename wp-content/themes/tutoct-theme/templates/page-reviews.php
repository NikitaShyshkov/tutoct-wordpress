<?php
/*
Template Name: Reviews
*/
get_header();
?>

<main class="bg-[#F6EEFF] h-full w-full flex flex-col">
    <div id="block-top" class="flex justify-between py-10 px-[150px]">
        <div>
            <div class="max-w-[880px] text-black text-5xl font-bold font-['Nunito']">Більше 1000 гарних відгуків від користувачів!</div>
            <div class="flex gap-5 my-[50px] relative">
                <div class="w-[420px] h-[333.31px] flex flex-col justify-center items-center gap-[10px] bg-white rounded-[20px] z-10">
                    <div class="text-[#8a48e6] text-5xl font-bold font-['Nunito']">1563</div>
                    <div class="text-[#120c38] text-[32px] font-bold font-['Nunito']">Відгуків</div>
                </div>
                <img id="asset-small" class="absolute -top-[37px] left-[375px]" src="<?php echo get_template_directory_uri(); ?>/assets/images/reviews/Asset-small.svg" alt="">
                <img id="asset-big" class="absolute -top-[106px] left-[-150px]" src="<?php echo get_template_directory_uri(); ?>/assets/images/reviews/Asset-big.svg" alt="">
                <div class="w-[420px] h-[333.31px] flex flex-col justify-center items-center gap-[10px] bg-white rounded-[20px]">
                    <!-- Stars -->
                    <div class="w-[270px] h-[50px] flex justify-center gap-2">
                        <div data-fill="On" data-plus="Off" data-property-1="Star" class="overflow-hidden">
                            <div data-svg-wrapper class="">
                                <svg width="46" height="44" viewBox="0 0 46 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15.1726 13.2793L1.88088 15.2064L1.64547 15.2543C1.28909 15.3489 0.964207 15.5364 0.703993 15.7976C0.443779 16.0589 0.257558 16.3845 0.164347 16.7412C0.0711361 17.098 0.0742745 17.4731 0.173442 17.8282C0.272609 18.1833 0.464252 18.5058 0.728801 18.7626L10.358 28.1355L8.08713 41.3751L8.06005 41.6043C8.03824 41.9729 8.11477 42.3406 8.28182 42.6699C8.44887 42.9992 8.70043 43.2782 9.01075 43.4783C9.32107 43.6784 9.67899 43.7924 10.0479 43.8087C10.4167 43.825 10.7833 43.7429 11.1101 43.571L22.9976 37.321L34.858 43.571L35.0663 43.6668C35.4102 43.8022 35.7839 43.8438 36.1491 43.7871C36.5143 43.7305 36.8579 43.5777 37.1446 43.3444C37.4313 43.1112 37.6508 42.8059 37.7805 42.4598C37.9103 42.1137 37.9456 41.7394 37.883 41.3751L35.61 28.1355L45.2434 18.7605L45.4059 18.5835C45.638 18.2976 45.7902 17.9552 45.847 17.5914C45.9037 17.2275 45.863 16.8551 45.729 16.5121C45.595 16.1691 45.3724 15.8677 45.084 15.6387C44.7956 15.4097 44.4516 15.2612 44.0871 15.2085L30.7955 13.2793L24.8538 1.23763C24.6819 0.888745 24.4157 0.594955 24.0854 0.389516C23.7552 0.184077 23.374 0.0751953 22.9851 0.0751953C22.5961 0.0751953 22.2149 0.184077 21.8847 0.389516C21.5544 0.594955 21.2882 0.888745 21.1163 1.23763L15.1726 13.2793Z" fill="#FFA869" />
                                </svg>
                            </div>
                        </div>
                        <div data-fill="On" data-plus="Off" data-property-1="Star" class="overflow-hidden">
                            <div data-svg-wrapper>
                                <svg width="46" height="44" viewBox="0 0 46 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15.1726 13.2793L1.88088 15.2064L1.64547 15.2543C1.28909 15.3489 0.964207 15.5364 0.703993 15.7976C0.443779 16.0589 0.257558 16.3845 0.164347 16.7412C0.0711361 17.098 0.0742745 17.4731 0.173442 17.8282C0.272609 18.1833 0.464252 18.5058 0.728801 18.7626L10.358 28.1355L8.08713 41.3751L8.06005 41.6043C8.03824 41.9729 8.11477 42.3406 8.28182 42.6699C8.44887 42.9992 8.70043 43.2782 9.01075 43.4783C9.32107 43.6784 9.67899 43.7924 10.0479 43.8087C10.4167 43.825 10.7833 43.7429 11.1101 43.571L22.9976 37.321L34.858 43.571L35.0663 43.6668C35.4102 43.8022 35.7839 43.8438 36.1491 43.7871C36.5143 43.7305 36.8579 43.5777 37.1446 43.3444C37.4313 43.1112 37.6508 42.8059 37.7805 42.4598C37.9103 42.1137 37.9456 41.7394 37.883 41.3751L35.61 28.1355L45.2434 18.7605L45.4059 18.5835C45.638 18.2976 45.7902 17.9552 45.847 17.5914C45.9037 17.2275 45.863 16.8551 45.729 16.5121C45.595 16.1691 45.3724 15.8677 45.084 15.6387C44.7956 15.4097 44.4516 15.2612 44.0871 15.2085L30.7955 13.2793L24.8538 1.23763C24.6819 0.888745 24.4157 0.594955 24.0854 0.389516C23.7552 0.184077 23.374 0.0751953 22.9851 0.0751953C22.5961 0.0751953 22.2149 0.184077 21.8847 0.389516C21.5544 0.594955 21.2882 0.888745 21.1163 1.23763L15.1726 13.2793Z" fill="#FFA869" />
                                </svg>
                            </div>
                        </div>
                        <div data-fill="On" data-plus="Off" data-property-1="Star" class="overflow-hidden">
                            <div data-svg-wrapper>
                                <svg width="46" height="44" viewBox="0 0 46 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15.1726 13.2793L1.88088 15.2064L1.64547 15.2543C1.28909 15.3489 0.964207 15.5364 0.703993 15.7976C0.443779 16.0589 0.257558 16.3845 0.164347 16.7412C0.0711361 17.098 0.0742745 17.4731 0.173442 17.8282C0.272609 18.1833 0.464252 18.5058 0.728801 18.7626L10.358 28.1355L8.08713 41.3751L8.06005 41.6043C8.03824 41.9729 8.11477 42.3406 8.28182 42.6699C8.44887 42.9992 8.70043 43.2782 9.01075 43.4783C9.32107 43.6784 9.67899 43.7924 10.0479 43.8087C10.4167 43.825 10.7833 43.7429 11.1101 43.571L22.9976 37.321L34.858 43.571L35.0663 43.6668C35.4102 43.8022 35.7839 43.8438 36.1491 43.7871C36.5143 43.7305 36.8579 43.5777 37.1446 43.3444C37.4313 43.1112 37.6508 42.8059 37.7805 42.4598C37.9103 42.1137 37.9456 41.7394 37.883 41.3751L35.61 28.1355L45.2434 18.7605L45.4059 18.5835C45.638 18.2976 45.7902 17.9552 45.847 17.5914C45.9037 17.2275 45.863 16.8551 45.729 16.5121C45.595 16.1691 45.3724 15.8677 45.084 15.6387C44.7956 15.4097 44.4516 15.2612 44.0871 15.2085L30.7955 13.2793L24.8538 1.23763C24.6819 0.888745 24.4157 0.594955 24.0854 0.389516C23.7552 0.184077 23.374 0.0751953 22.9851 0.0751953C22.5961 0.0751953 22.2149 0.184077 21.8847 0.389516C21.5544 0.594955 21.2882 0.888745 21.1163 1.23763L15.1726 13.2793Z" fill="#FFA869" />
                                </svg>
                            </div>
                        </div>
                        <div data-fill="On" data-plus="Off" data-property-1="Star" class="overflow-hidden">
                            <div data-svg-wrapper>
                                <svg width="46" height="44" viewBox="0 0 46 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15.1726 13.2793L1.88088 15.2064L1.64547 15.2543C1.28909 15.3489 0.964207 15.5364 0.703993 15.7976C0.443779 16.0589 0.257558 16.3845 0.164347 16.7412C0.0711361 17.098 0.0742745 17.4731 0.173442 17.8282C0.272609 18.1833 0.464252 18.5058 0.728801 18.7626L10.358 28.1355L8.08713 41.3751L8.06005 41.6043C8.03824 41.9729 8.11477 42.3406 8.28182 42.6699C8.44887 42.9992 8.70043 43.2782 9.01075 43.4783C9.32107 43.6784 9.67899 43.7924 10.0479 43.8087C10.4167 43.825 10.7833 43.7429 11.1101 43.571L22.9976 37.321L34.858 43.571L35.0663 43.6668C35.4102 43.8022 35.7839 43.8438 36.1491 43.7871C36.5143 43.7305 36.8579 43.5777 37.1446 43.3444C37.4313 43.1112 37.6508 42.8059 37.7805 42.4598C37.9103 42.1137 37.9456 41.7394 37.883 41.3751L35.61 28.1355L45.2434 18.7605L45.4059 18.5835C45.638 18.2976 45.7902 17.9552 45.847 17.5914C45.9037 17.2275 45.863 16.8551 45.729 16.5121C45.595 16.1691 45.3724 15.8677 45.084 15.6387C44.7956 15.4097 44.4516 15.2612 44.0871 15.2085L30.7955 13.2793L24.8538 1.23763C24.6819 0.888745 24.4157 0.594955 24.0854 0.389516C23.7552 0.184077 23.374 0.0751953 22.9851 0.0751953C22.5961 0.0751953 22.2149 0.184077 21.8847 0.389516C21.5544 0.594955 21.2882 0.888745 21.1163 1.23763L15.1726 13.2793Z" fill="#FFA869" />
                                </svg>
                            </div>
                        </div>
                        <div data-fill="On" data-plus="Off" data-property-1="Star" class="overflow-hidden">
                            <div data-svg-wrapper>
                                <svg width="46" height="44" viewBox="0 0 46 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15.1726 13.2793L1.88088 15.2064L1.64547 15.2543C1.28909 15.3489 0.964207 15.5364 0.703993 15.7976C0.443779 16.0589 0.257558 16.3845 0.164347 16.7412C0.0711361 17.098 0.0742745 17.4731 0.173442 17.8282C0.272609 18.1833 0.464252 18.5058 0.728801 18.7626L10.358 28.1355L8.08713 41.3751L8.06005 41.6043C8.03824 41.9729 8.11477 42.3406 8.28182 42.6699C8.44887 42.9992 8.70043 43.2782 9.01075 43.4783C9.32107 43.6784 9.67899 43.7924 10.0479 43.8087C10.4167 43.825 10.7833 43.7429 11.1101 43.571L22.9976 37.321L34.858 43.571L35.0663 43.6668C35.4102 43.8022 35.7839 43.8438 36.1491 43.7871C36.5143 43.7305 36.8579 43.5777 37.1446 43.3444C37.4313 43.1112 37.6508 42.8059 37.7805 42.4598C37.9103 42.1137 37.9456 41.7394 37.883 41.3751L35.61 28.1355L45.2434 18.7605L45.4059 18.5835C45.638 18.2976 45.7902 17.9552 45.847 17.5914C45.9037 17.2275 45.863 16.8551 45.729 16.5121C45.595 16.1691 45.3724 15.8677 45.084 15.6387C44.7956 15.4097 44.4516 15.2612 44.0871 15.2085L30.7955 13.2793L24.8538 1.23763C24.6819 0.888745 24.4157 0.594955 24.0854 0.389516C23.7552 0.184077 23.374 0.0751953 22.9851 0.0751953C22.5961 0.0751953 22.2149 0.184077 21.8847 0.389516C21.5544 0.594955 21.2882 0.888745 21.1163 1.23763L15.1726 13.2793Z" fill="#FFA869" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="text-[#8a48e6] text-5xl font-bold font-['Nunito']">4.9</div>
                </div>
            </div>
        </div>
        <img class="w-[325px] h-[501px]" src="<?php echo get_template_directory_uri(); ?>/assets/images/oct-price-main.png" alt="">
    </div>
    <!-- Отзывы -->
    <div class="relative w-full max-w-5xl mx-auto">
        <!-- Контейнер карусели -->
        <div class="overflow-hidden">
            <?php 
                global $wpdb;
                $table_name = $wpdb->prefix . 'reviews';
                $reviews = $wpdb->get_results("SELECT * FROM $table_name ORDER BY created_at DESC");?>
            <div id="carousel" class="flex transition-transform duration-500 ease-in-out" data-total-slides="<?php echo count($reviews) ? : 1; ?>">
                <?php
                if ($reviews) {
                    foreach ($reviews as $review) {
                        // Генерируем звёзды на основе рейтинга
                        $stars_html = '';
                        for ($i = 1; $i <= 5; $i++) {
                            if ($i <= $review->rating) {
                                // Заполненная звезда
                                $stars_html .= '
                                <div data-fill="On" data-plus="Off" data-property-1="Star" class="overflow-hidden">
                                    <div data-svg-wrapper>
                                        <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M9.28771 8.81846L1.31271 9.97471L1.17146 10.0035C0.957634 10.0602 0.762704 10.1727 0.606576 10.3295C0.450447 10.4862 0.338715 10.6816 0.282788 10.8956C0.226861 11.1097 0.228744 11.3347 0.288245 11.5478C0.347745 11.7609 0.462731 11.9544 0.62146 12.1085L6.39896 17.7322L5.03646 25.676L5.02021 25.8135C5.00712 26.0346 5.05304 26.2553 5.15327 26.4528C5.2535 26.6504 5.40444 26.8178 5.59063 26.9378C5.77682 27.0579 5.99157 27.1263 6.2129 27.1361C6.43422 27.1459 6.65417 27.0966 6.85021 26.9935L13.9827 23.2435L21.099 26.9935L21.224 27.051C21.4303 27.1322 21.6545 27.1571 21.8737 27.1232C22.0928 27.0892 22.2989 26.9975 22.471 26.8575C22.643 26.7176 22.7747 26.5344 22.8525 26.3268C22.9304 26.1191 22.9516 25.8945 22.914 25.676L21.5502 17.7322L27.3302 12.1072L27.4277 12.001C27.567 11.8294 27.6583 11.624 27.6924 11.4057C27.7264 11.1874 27.702 10.9639 27.6216 10.7581C27.5412 10.5523 27.4076 10.3715 27.2346 10.2341C27.0615 10.0967 26.8551 10.0076 26.6365 9.97596L18.6615 8.81846L15.0965 1.59346C14.9933 1.38413 14.8336 1.20785 14.6354 1.08459C14.4373 0.961325 14.2086 0.895996 13.9752 0.895996C13.7418 0.895996 13.5131 0.961325 13.315 1.08459C13.1168 1.20785 12.9571 1.38413 12.854 1.59346L9.28771 8.81846Z" fill="#FFA869" />
                                        </svg>
                                    </div>
                                </div>';
                            } else {
                                // Пустая звезда
                                $stars_html .= '
                                <div data-fill="Off" data-plus="Off" data-property-1="Star" class="overflow-hidden">
                                    <div data-svg-wrapper>
                                        <svg width="28" height="26" viewBox="0 0 28 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M13.9844 20.831L6.26941 24.8872L7.74316 16.296L1.49316 10.2122L10.1182 8.96225L13.9757 1.146L17.8332 8.96225L26.4582 10.2122L20.2082 16.296L21.6819 24.8872L13.9844 20.831Z" stroke="#FFA869" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                    </div>
                                </div>';
                            }
                        }
                ?>
                        <!-- Карточка с отзывом -->
                        <div class="min-w-full flex justify-center">
                            <div class="w-[530px] h-[274px] bg-white rounded-[20px] flex flex-col p-5">
                                <div class="w-full flex justify-between">
                                    <div class="text-black text-2xl font-bold font-['Nunito']"><?php echo esc_html($review->author_name); ?></div>
                                    <!-- Stars -->
                                    <div class="flex">
                                        <?php echo $stars_html; ?>
                                    </div>
                                </div>
                                <div class="text-[#8a48e6] text-xl font-normal font-['Mulish']"><?php echo esc_html($review->author_role); ?></div>
                                <div class="max-w-[487.47px] h-[151px] mt-5 text-[#827ead] text-[15px] font-normal font-['Mulish'] overflow-y-auto">
                                    <?php echo nl2br(esc_html($review->review_text)); ?>
                                </div>
                            </div>
                        </div>
                    <?php
                    }
                } else {
                    ?>
                    <div class="min-w-full flex justify-center">
                        <div class="w-[530px] h-[274px] bg-white rounded-[20px] flex flex-col p-5">
                            <div class="text-gray-600">Отзывов пока нет.</div>
                        </div>
                    </div>
                <?php
                }
                ?>
            </div>
        </div>

        <!-- Кнопки навигации -->
        <button id="prev" class="absolute left-0 top-1/2 transform -translate-y-1/2">
            <div data-svg-wrapper>
                <svg width="52" height="51" viewBox="0 0 52 51" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M26.0003 0.643563C32.5639 0.63837 38.8664 3.2147 43.5469 7.81632C48.2273 12.4179 50.9104 18.6757 51.0167 25.2385C51.1231 31.8013 48.6442 38.1427 44.1152 42.8936C39.5863 47.6444 33.3707 50.4236 26.8103 50.6311L26.0003 50.6436L25.1902 50.6311C18.6298 50.4236 12.4142 47.6444 7.88525 42.8936C3.35631 38.1427 0.87741 31.8013 0.983754 25.2385C1.0901 18.6757 3.77315 12.4179 8.45364 7.81632C13.1341 3.2147 19.4366 0.63837 26.0003 0.643563ZM27.7677 13.8761C27.2989 13.4074 26.6632 13.1441 26.0003 13.1441C25.3373 13.1441 24.7016 13.4074 24.2328 13.8761L14.2327 23.8761C14.1587 23.95 14.0894 24.0285 14.0252 24.1111L13.8652 24.3411L13.7352 24.5861L13.6252 24.8611L13.5502 25.1411L13.5077 25.4561L13.5002 25.6436L13.5102 25.8686L13.5277 26.0136L13.5902 26.3086L13.6777 26.5711L13.8127 26.8536L13.9202 27.0286L14.0977 27.2661L14.2327 27.4111L24.2328 37.4111L24.4678 37.6186C24.9702 38.0071 25.6018 38.1898 26.2341 38.1296C26.8664 38.0693 27.452 37.7707 27.8721 37.2943C28.2922 36.8178 28.5152 36.1994 28.4958 35.5645C28.4764 34.9296 28.2161 34.326 27.7677 33.8761L22.0378 28.1436H36.0003L36.2928 28.1261C36.9255 28.0508 37.5056 27.7368 37.9146 27.2481C38.3236 26.7595 38.5305 26.1332 38.4932 25.497C38.4558 24.8609 38.177 24.2631 37.7137 23.8257C37.2503 23.3883 36.6374 23.1443 36.0003 23.1436H22.0352L27.7677 17.4111L27.9753 17.1761C28.3484 16.6951 28.5332 16.0944 28.495 15.4869C28.4568 14.8793 28.1982 14.3065 27.7677 13.8761Z" fill="#8A48E6" />
                </svg>
            </div>
        </button>
        <button id="next" class="absolute right-0 top-1/2 transform -translate-y-1/2">
            <div data-svg-wrapper>
                <svg width="52" height="51" viewBox="0 0 52 51" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M25.9997 0.643563C19.4361 0.63837 13.1336 3.2147 8.45315 7.81632C3.77265 12.4179 1.0896 18.6757 0.983258 25.2385C0.876914 31.8013 3.35581 38.1427 7.88475 42.8936C12.4137 47.6444 18.6293 50.4236 25.1897 50.6311L25.9997 50.6436L26.8098 50.6311C33.3702 50.4236 39.5858 47.6444 44.1147 42.8936C48.6437 38.1427 51.1226 31.8013 51.0162 25.2385C50.9099 18.6757 48.2268 12.4179 43.5464 7.81632C38.8659 3.2147 32.5634 0.63837 25.9997 0.643563ZM24.2323 13.8761C24.7011 13.4074 25.3368 13.1441 25.9997 13.1441C26.6627 13.1441 27.2984 13.4074 27.7672 13.8761L37.7673 23.8761C37.8413 23.95 37.9106 24.0285 37.9748 24.1111L38.1348 24.3411L38.2648 24.5861L38.3748 24.8611L38.4498 25.1411L38.4923 25.4561L38.4998 25.6436L38.4898 25.8686L38.4723 26.0136L38.4098 26.3086L38.3223 26.5711L38.1873 26.8536L38.0798 27.0286L37.9023 27.2661L37.7673 27.4111L27.7672 37.4111L27.5322 37.6186C27.0298 38.0071 26.3982 38.1898 25.7659 38.1296C25.1336 38.0693 24.548 37.7707 24.1279 37.2943C23.7078 36.8178 23.4848 36.1994 23.5042 35.5645C23.5236 34.9296 23.7839 34.326 24.2323 33.8761L29.9622 28.1436H15.9997L15.7072 28.1261C15.0745 28.0508 14.4944 27.7368 14.0854 27.2481C13.6764 26.7595 13.4695 26.1332 13.5068 25.497C13.5442 24.8609 13.823 24.2631 14.2863 23.8257C14.7497 23.3883 15.3626 23.1443 15.9997 23.1436H29.9648L24.2323 17.4111L24.0247 17.1761C23.6516 16.6951 23.4668 16.0944 23.505 15.4869C23.5432 14.8793 23.8018 14.3065 24.2323 13.8761Z" fill="#8A48E6" />
                </svg>
            </div>
        </button>
    </div>
    <!-- Добавление отзывов -->
    <div class="w-full flex justify-center p-10">
        <div class="w-[680px] bg-white rounded-[20px] p-5">
            <form method="post" id="review-form">
                <input type="hidden" name="action" value="submit_review">
                <div class="flex flex-col space-y-4">
                    <!-- Поле для имени и звёзды -->
                    <div class="flex items-center justify-between">
                        <input type="text" name="author_name" id="author_name" placeholder="Ім'я" class="w-2/3 p-3 border border-gray-300 rounded-[10px] focus:outline-none focus:ring-2 focus:ring-purple-600" required>
                        <!-- Рейтинг (звёзды) -->
                        <div class="flex space-x-1">
                            <input type="hidden" name="rating" id="rating" value="4"> <!-- По умолчанию 4 звезды -->
                            <div class="star cursor-pointer" data-value="1">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9.28771 8.81846L1.31271 9.97471L1.17146 10.0035C0.957634 10.0602 0.762704 10.1727 0.606576 10.3295C0.450447 10.4862 0.338715 10.6816 0.282788 10.8956C0.226861 11.1097 0.228744 11.3347 0.288245 11.5478C0.347745 11.7609 0.462731 11.9544 0.62146 12.1085L6.39896 17.7322L5.03646 25.676L5.02021 25.8135C5.00712 26.0346 5.05304 26.2553 5.15327 26.4528C5.2535 26.6504 5.40444 26.8178 5.59063 26.9378C5.77682 27.0579 5.99157 27.1263 6.2129 27.1361C6.43422 27.1459 6.65417 27.0966 6.85021 26.9935L13.9827 23.2435L21.099 26.9935L21.224 27.051C21.4303 27.1322 21.6545 27.1571 21.8737 27.1232C22.0928 27.0892 22.2989 26.9975 22.471 26.8575C22.643 26.7176 22.7747 26.5344 22.8525 26.3268C22.9304 26.1191 22.9516 25.8945 22.914 25.676L21.5502 17.7322L27.3302 12.1072L27.4277 12.001C27.567 11.8294 27.6583 11.624 27.6924 11.4057C27.7264 11.1874 27.702 10.9639 27.6216 10.7581C27.5412 10.5523 27.4076 10.3715 27.2346 10.2341C27.0615 10.0967 26.8551 10.0076 26.6365 9.97596L18.6615 8.81846L15.0965 1.59346C14.9933 1.38413 14.8336 1.20785 14.6354 1.08459C14.4373 0.961325 14.2086 0.895996 13.9752 0.895996C13.7418 0.895996 13.5131 0.961325 13.315 1.08459C13.1168 1.20785 12.9571 1.38413 12.854 1.59346L9.28771 8.81846Z" fill="#FFA869" />
                                </svg>
                            </div>
                            <div class="star cursor-pointer" data-value="2">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9.28771 8.81846L1.31271 9.97471L1.17146 10.0035C0.957634 10.0602 0.762704 10.1727 0.606576 10.3295C0.450447 10.4862 0.338715 10.6816 0.282788 10.8956C0.226861 11.1097 0.228744 11.3347 0.288245 11.5478C0.347745 11.7609 0.462731 11.9544 0.62146 12.1085L6.39896 17.7322L5.03646 25.676L5.02021 25.8135C5.00712 26.0346 5.05304 26.2553 5.15327 26.4528C5.2535 26.6504 5.40444 26.8178 5.59063 26.9378C5.77682 27.0579 5.99157 27.1263 6.2129 27.1361C6.43422 27.1459 6.65417 27.0966 6.85021 26.9935L13.9827 23.2435L21.099 26.9935L21.224 27.051C21.4303 27.1322 21.6545 27.1571 21.8737 27.1232C22.0928 27.0892 22.2989 26.9975 22.471 26.8575C22.643 26.7176 22.7747 26.5344 22.8525 26.3268C22.9304 26.1191 22.9516 25.8945 22.914 25.676L21.5502 17.7322L27.3302 12.1072L27.4277 12.001C27.567 11.8294 27.6583 11.624 27.6924 11.4057C27.7264 11.1874 27.702 10.9639 27.6216 10.7581C27.5412 10.5523 27.4076 10.3715 27.2346 10.2341C27.0615 10.0967 26.8551 10.0076 26.6365 9.97596L18.6615 8.81846L15.0965 1.59346C14.9933 1.38413 14.8336 1.20785 14.6354 1.08459C14.4373 0.961325 14.2086 0.895996 13.9752 0.895996C13.7418 0.895996 13.5131 0.961325 13.315 1.08459C13.1168 1.20785 12.9571 1.38413 12.854 1.59346L9.28771 8.81846Z" fill="#FFA869" />
                                </svg>
                            </div>
                            <div class="star cursor-pointer" data-value="3">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9.28771 8.81846L1.31271 9.97471L1.17146 10.0035C0.957634 10.0602 0.762704 10.1727 0.606576 10.3295C0.450447 10.4862 0.338715 10.6816 0.282788 10.8956C0.226861 11.1097 0.228744 11.3347 0.288245 11.5478C0.347745 11.7609 0.462731 11.9544 0.62146 12.1085L6.39896 17.7322L5.03646 25.676L5.02021 25.8135C5.00712 26.0346 5.05304 26.2553 5.15327 26.4528C5.2535 26.6504 5.40444 26.8178 5.59063 26.9378C5.77682 27.0579 5.99157 27.1263 6.2129 27.1361C6.43422 27.1459 6.65417 27.0966 6.85021 26.9935L13.9827 23.2435L21.099 26.9935L21.224 27.051C21.4303 27.1322 21.6545 27.1571 21.8737 27.1232C22.0928 27.0892 22.2989 26.9975 22.471 26.8575C22.643 26.7176 22.7747 26.5344 22.8525 26.3268C22.9304 26.1191 22.9516 25.8945 22.914 25.676L21.5502 17.7322L27.3302 12.1072L27.4277 12.001C27.567 11.8294 27.6583 11.624 27.6924 11.4057C27.7264 11.1874 27.702 10.9639 27.6216 10.7581C27.5412 10.5523 27.4076 10.3715 27.2346 10.2341C27.0615 10.0967 26.8551 10.0076 26.6365 9.97596L18.6615 8.81846L15.0965 1.59346C14.9933 1.38413 14.8336 1.20785 14.6354 1.08459C14.4373 0.961325 14.2086 0.895996 13.9752 0.895996C13.7418 0.895996 13.5131 0.961325 13.315 1.08459C13.1168 1.20785 12.9571 1.38413 12.854 1.59346L9.28771 8.81846Z" fill="#FFA869" />
                                </svg>
                            </div>
                            <div class="star cursor-pointer" data-value="4">
                                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9.28771 8.81846L1.31271 9.97471L1.17146 10.0035C0.957634 10.0602 0.762704 10.1727 0.606576 10.3295C0.450447 10.4862 0.338715 10.6816 0.282788 10.8956C0.226861 11.1097 0.228744 11.3347 0.288245 11.5478C0.347745 11.7609 0.462731 11.9544 0.62146 12.1085L6.39896 17.7322L5.03646 25.676L5.02021 25.8135C5.00712 26.0346 5.05304 26.2553 5.15327 26.4528C5.2535 26.6504 5.40444 26.8178 5.59063 26.9378C5.77682 27.0579 5.99157 27.1263 6.2129 27.1361C6.43422 27.1459 6.65417 27.0966 6.85021 26.9935L13.9827 23.2435L21.099 26.9935L21.224 27.051C21.4303 27.1322 21.6545 27.1571 21.8737 27.1232C22.0928 27.0892 22.2989 26.9975 22.471 26.8575C22.643 26.7176 22.7747 26.5344 22.8525 26.3268C22.9304 26.1191 22.9516 25.8945 22.914 25.676L21.5502 17.7322L27.3302 12.1072L27.4277 12.001C27.567 11.8294 27.6583 11.624 27.6924 11.4057C27.7264 11.1874 27.702 10.9639 27.6216 10.7581C27.5412 10.5523 27.4076 10.3715 27.2346 10.2341C27.0615 10.0967 26.8551 10.0076 26.6365 9.97596L18.6615 8.81846L15.0965 1.59346C14.9933 1.38413 14.8336 1.20785 14.6354 1.08459C14.4373 0.961325 14.2086 0.895996 13.9752 0.895996C13.7418 0.895996 13.5131 0.961325 13.315 1.08459C13.1168 1.20785 12.9571 1.38413 12.854 1.59346L9.28771 8.81846Z" fill="#FFA869" />
                                </svg>
                            </div>
                            <div class="star cursor-pointer" data-value="5">
                                <svg width="28" height="26" viewBox="0 0 28 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.9844 20.831L6.26941 24.8872L7.74316 16.296L1.49316 10.2122L10.1182 8.96225L13.9757 1.146L17.8332 8.96225L26.4582 10.2122L20.2082 16.296L21.6819 24.8872L13.9844 20.831Z" stroke="#FFA869" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </div>
                        </div>
                    </div>
                    <!-- Поле для роли -->
                    <div>
                        <select name="author_role" id="author_role" class="w-full p-3 border border-gray-300 rounded-[10px] focus:outline-none focus:ring-2 focus:ring-purple-600" required>
                            <option value="" disabled selected>Роль</option>
                            <option value="Учень">Учень</option>
                            <option value="Вчитель">Вчитель</option>
                            <option value="Родич">Родич</option>
                        </select>
                    </div>
                    <!-- Поле для текста отзыва -->
                    <div>
                        <textarea name="review_text" id="review_text" placeholder="Введіть текст тут" rows="5" class="w-full p-3 border border-gray-300 rounded-[10px] focus:outline-none focus:ring-2 focus:ring-purple-600" required></textarea>
                    </div>
                    <!-- Кнопка отправки -->
                    <button type="submit" class="w-full bg-purple-600 text-white p-3 rounded-[10px] hover:bg-purple-700 transition">Додати коментар</button>
                </div>
            </form>
        </div>
    </div>
</main>
<?php
if (isset($_POST['action']) && $_POST['action'] === 'submit_review') {
    global $wpdb;
    $table_name = $wpdb->prefix . 'reviews';

    $author_name = sanitize_text_field($_POST['author_name']);
    $author_role = sanitize_text_field($_POST['author_role']);
    $rating = intval($_POST['rating']);
    $review_text = sanitize_textarea_field($_POST['review_text']);

    $wpdb->insert(
        $table_name,
        array(
            'author_name' => $author_name,
            'author_role' => $author_role,
            'rating' => $rating,
            'review_text' => $review_text,
        ),
        array('%s', '%s', '%d', '%s')
    );

    wp_redirect(add_query_arg('success', '1', get_permalink()));
    exit;
}
?>
<?php if (isset($_GET['success']) && $_GET['success'] == '1') : ?>
    <div class="w-full max-w-lg bg-green-100 text-green-800 p-4 rounded-[10px] mb-4">
        Отзыв успешно добавлен!
    </div>
<?php endif; ?>

<?php get_footer(); ?>